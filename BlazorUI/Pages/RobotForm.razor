@page "/robot/add"
@using Domain
@using Blazored.FluentValidation

<MudText Class="my-6" Typo="Typo.h3" Color="Color.Secondary">RobotForm : Create Mode</MudText>

<EditForm Model="@Robot" OnValidSubmit="@ValidSubmitHandle" OnInvalidSubmit="@InvalidSubmitHandle">
    <FluentValidationValidator />
    
    <MudGrid>
        <MudItem xs="6">
            <MudCard>
                <MudCardContent>
                    <MudTextField 
                            @bind-Value="@Robot.CodeName" 
                            Label="CodeName" 
                            Variant="Variant.Text" 
                            For="() => Robot.CodeName"/>
                </MudCardContent>
                <MudCardActions>
                    <MudButton 
                        Variant="Variant.Filled" 
                        ButtonType="ButtonType.Submit"
                        Color="Color.Secondary">Add Robot</MudButton>
                </MudCardActions>
            </MudCard>
        </MudItem>
        <MudItem xs="6">
            <MudPaper Elevation="2" Class="mud-height-full pa-4">
                <MudText Typo="Typo.h6">Validation Summary</MudText>
                @if (IsSuccess)
                {
                    <MudText Typo="Typo.body1" Color="Color.Success">Validation is successfull</MudText>
                }
                else
                {
                    <MudText Color="Color.Error">
                        <ValidationSummary />
                    </MudText>
                }
            </MudPaper>
        </MudItem>
    </MudGrid>
</EditForm>


@code {
    public Robot Robot { get; set; } = new();

    bool IsSuccess = false;

    void ValidSubmitHandle()
    {
        Console.WriteLine("Valid Submit");
        IsSuccess = true;
    }
    
    void InvalidSubmitHandle()
    {
        Console.WriteLine("Invalid Submit");
        IsSuccess = false;
    }
}