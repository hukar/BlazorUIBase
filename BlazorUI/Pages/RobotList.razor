@page "/robot/list"
@using BlazorUI.Services
@using Domain

<MudText Class="mt-6" Typo="Typo.h3" Color="Color.Secondary">RobotList</MudText>

@if (Robots is not null)
{
    @foreach (var robot in Robots)
    {
        <MudPaper Class="d-flex gap-4 pa-2 my-4 align-center grey lighten-5" Elevation="2">
            <MudAvatar Rounded="true" Style="height: 50px; width:  50px;">
                <MudImage Src="@($"images/robots/robot-{GetImageId()}.png")" ></MudImage>
            </MudAvatar>
            <MudText Typo="Typo.h6" Class="grey-text text-darken-1">@robot.CodeName</MudText>
            <MudButton
                Class="ml-auto"
                Variant="Variant.Text" 
                Color="Color.Info"
                EndIcon="@Icons.Material.Filled.EditNote">Edit</MudButton>
            <MudButton 
                Variant="Variant.Text" 
                Color="Color.Error"
                EndIcon="@Icons.Material.Filled.Blender">Disintegrate</MudButton>
        </MudPaper>
    }
}


@code {

    [Inject]
    public IRobotRepository Repo { get; set; } = default!;

    public IEnumerable<Robot> Robots { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        Robots = await Repo.GetAllRobots();
    }

    int GetImageId()
    {
        Random random = new Random();

        return random.Next(1, 8);
    }

}